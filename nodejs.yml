---
- name: nodejs
  hosts: app1
  become: yes

  tasks:
  - name: install remi repo
    yum:
      name: http://rpms.remirepo.net/enterprise/remi-release-7.rpm
      state: present

  - name: import remi gpg key
    rpm_key:
      key: http://rpms.remirepo.net/RPM-GPG-KEY-remi
      state: present

  - name: install epel repo
    yum:
      name: epel-release
      state: present

  - name: ensure firewalld is stopped
    service:
      name: firewalld
      state: stopped

  - name: install node.js and npm
    yum:
      name: npm
      state: present
      enablerepo: epel

  - name: install forever
    npm:
      name: forever
      global: yes
      state: present
